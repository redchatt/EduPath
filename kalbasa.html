<!DOCTYPE html>
<html lang="az">
<head>
    <meta charset="UTF-8">
    <title>EduPath | Escobar Admin Panel</title>
    
    <script>
        function checkAuth() {
            if (localStorage.getItem("escobar_auth") !== "true") {
                let user = prompt("ƒ∞stifad…ô√ßi adƒ±:");
                let pass = prompt("≈ûifr…ô:");
                if (user === "Escobar" && pass === "1990") {
                    localStorage.setItem("escobar_auth", "true");
                } else {
                    alert("Giri≈ü qadaƒüandƒ±r!");
                    window.location.reload();
                }
            }
        }
        checkAuth();
    </script>

    <style>
        :root { --main: #38bdf8; --bg: #020617; --card: #0f172a; --red: #f43f5e; --green: #10b981; }
        * { box-sizing: border-box; margin: 0; padding: 0; font-family: 'Inter', sans-serif; }
        body { background: var(--bg); color: white; display: flex; min-height: 100vh; }
        
        /* Sidebar */
        .sidebar { width: 260px; background: var(--card); border-right: 1px solid #1e293b; padding: 25px; position: fixed; height: 100vh; }
        .sidebar h2 { color: var(--main); margin-bottom: 30px; text-align: center; border-bottom: 2px solid var(--main); padding-bottom: 10px; }
        .nav-btn { width: 100%; padding: 12px; margin: 10px 0; border: none; background: rgba(56, 189, 248, 0.05); color: #94a3b8; text-align: left; cursor: pointer; border-radius: 8px; }
        
        /* Main Content */
        .content { margin-left: 260px; padding: 35px; width: calc(100% - 260px); }
        .header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 30px; }
        
        /* Stats */
        .stats { display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px; margin-bottom: 30px; }
        .stat-box { background: var(--card); padding: 20px; border-radius: 15px; border-left: 4px solid var(--main); }
        .stat-box h3 { font-size: 28px; color: var(--main); }

        /* Tables & Sections */
        .section { background: var(--card); padding: 25px; border-radius: 20px; border: 1px solid #1e293b; margin-bottom: 25px; }
        table { width: 100%; border-collapse: collapse; }
        th { text-align: left; padding: 12px; color: var(--main); border-bottom: 2px solid #1e293b; }
        td { padding: 12px; border-bottom: 1px solid #1e293b; }

        /* Inputs & Buttons */
        input { width: 100%; padding: 10px; border-radius: 8px; border: 1px solid #334155; background: #020617; color: white; margin-top: 5px; }
        .btn { padding: 8px 15px; border: none; border-radius: 6px; cursor: pointer; font-weight: bold; transition: 0.3s; }
        .btn-blue { background: var(--main); color: #000; }
        .btn-red { background: var(--red); color: white; }
        .btn-green { background: var(--green); color: white; }

        /* Chat */
        .chat-box { background: #020617; border-radius: 10px; padding: 15px; height: 200px; overflow-y: auto; margin-bottom: 10px; border: 1px solid #1e293b; }
        .msg { margin-bottom: 10px; padding: 8px; border-radius: 8px; font-size: 14px; }
        .msg-user { background: rgba(56, 189, 248, 0.1); border-left: 3px solid var(--main); }
    </style>
</head>
<body>

    <div class="sidebar">
        <h2>ESCOBAR</h2>
        <button class="nav-btn">üìä Dashboard</button>
        <button class="nav-btn">üí¨ Canlƒ± D…ôst…ôk</button>
        <button class="nav-btn">üèÜ Turnir ƒ∞dar…ôsi</button>
        <button class="btn btn-red" style="width:100%; margin-top:50px;" onclick="logout()">√áIXI≈û</button>
    </div>

    <div class="content">
        <div class="header">
            <h1>Sistem ƒ∞dar…ôetm…ô Paneli</h1>
            <div id="clock"></div>
        </div>

        <div class="stats">
            <div class="stat-box">
                <small>Aktiv ƒ∞stifad…ô√ßi Sayƒ±</small>
                <h3 id="userCount">0</h3>
            </div>
            <div class="stat-box" style="border-color: var(--green);">
                <small>√úmumi Kassa</small>
                <h3 id="totalCash">0.00 AZN</h3>
            </div>
            <div class="stat-box" style="border-color: var(--red);">
                <small>Bloklananlar</small>
                <h3 id="bannedCount">0</h3>
            </div>
        </div>

        <div style="display: grid; grid-template-columns: 2fr 1fr; gap: 20px;">
            <div class="section">
                <h3>üë• ƒ∞stifad…ô√ßil…ôr & Balans ƒ∞dar…ôsi</h3>
                <table>
                    <thead>
                        <tr>
                            <th>T…ôl…ôb…ô</th>
                            <th>Balans</th>
                            <th>Status</th>
                            <th>∆èm…ôliyyat</th>
                        </tr>
                    </thead>
                    <tbody id="userTable">
                        </tbody>
                </table>
            </div>

            <div class="section">
                <h3>üí¨ Canlƒ± D…ôst…ôk</h3>
                <div class="chat-box" id="chatBox">
                    <div class="msg msg-user"><b>Sistem:</b> Yeni mesaj yoxdur.</div>
                </div>
                <input type="text" id="chatInput" placeholder="Cavab yaz...">
                <button class="btn btn-blue" style="width: 100%; margin-top: 10px;" onclick="replyChat()">G√∂nd…ôr</button>
            </div>
        </div>

        <div class="section">
            <h3>üèÜ Turnir v…ô Bilet Ayarlarƒ±</h3>
            <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 15px; margin-top: 15px;">
                <div>
                    <label>Turnir Adƒ±</label>
                    <input type="text" id="tName">
                </div>
                <div>
                    <label>Bilet Qiym…ôti (AZN)</label>
                    <input type="number" id="tTicket">
                </div>
                <div>
                    <label>M√ºkafat Fondu (AZN)</label>
                    <input type="number" id="tPrize">
                </div>
            </div>
            <button class="btn btn-green" style="margin-top: 15px; width: 200px;" onclick="updateTournament()">Yadda Saxla</button>
        </div>
    </div>

    <script>
        // M…ôlumatlarƒ± Baza (LocalStorage) vasit…ôsil…ô idar…ô edirik
        let users = JSON.parse(localStorage.getItem("edu_users")) || [];

        function renderData() {
            const table = document.getElementById("userTable");
            table.innerHTML = "";
            let total = 0;
            let banned = 0;

            users.forEach((u, i) => {
                total += u.balance;
                if(u.isBanned) banned++;

                table.innerHTML += `
                    <tr style="opacity: ${u.isBanned ? '0.4' : '1'}">
                        <td>${u.name} <br> <small>${u.email}</small></td>
                        <td style="color: var(--green); font-weight: bold;">${u.balance.toFixed(2)} AZN</td>
                        <td>${u.isBanned ? 'üî¥ Blok' : 'üü¢ Aktiv'}</td>
                        <td>
                            <button class="btn btn-blue" onclick="editBal(${i})">+/-</button>
                            <button class="btn btn-red" onclick="toggleBan(${i})">${u.isBanned ? 'A√ß' : 'BAN'}</button>
                        </td>
                    </tr>
                `;
            });

            document.getElementById("userCount").innerText = users.length;
            document.getElementById("totalCash").innerText = total.toFixed(2) + " AZN";
            document.getElementById("bannedCount").innerText = banned;
        }

        function editBal(i) {
            let val = prompt("M…ôbl…ôƒüi d…ôyi≈ü (m…ôs: 10 v…ô ya -5):");
            if (val) {
                users[i].balance += parseFloat(val);
                save();
            }
        }

        function toggleBan(i) {
            users[i].isBanned = !users[i].isBanned;
            save();
        }

        function updateTournament() {
            const t = {
                name: document.getElementById("tName").value,
                ticket: document.getElementById("tTicket").value,
                prize: document.getElementById("tPrize").value
            };
            localStorage.setItem("active_tournament", JSON.stringify(t));
            alert("Turnir m…ôlumatlarƒ± yenil…ôndi!");
        }

        function replyChat() {
            const msg = document.getElementById("chatInput").value;
            if(msg) {
                const box = document.getElementById("chatBox");
                box.innerHTML += `<div class="msg" style="text-align:right"><b>S…ôn:</b> ${msg}</div>`;
                document.getElementById("chatInput").value = "";
                box.scrollTop = box.scrollHeight;
            }
        }

        function save() {
            localStorage.setItem("edu_users", JSON.stringify(users));
            renderData();
        }

        function logout() {
            localStorage.removeItem("escobar_auth");
            window.location.reload();
        }

        setInterval(() => { document.getElementById('clock').innerText = new Date().toLocaleTimeString(); }, 1000);
        renderData();
    </script>
</body>
</html>
