<!DOCTYPE html>
<html lang="az">
<head>
    <meta charset="UTF-8">
    <title>EduPath | GiriÅŸ vÉ™ Qeydiyyat</title>
    <style>
        :root { --main: #38bdf8; --bg: #020617; --card: #0f172a; }
        body { background: var(--bg); color: white; font-family: 'Segoe UI', sans-serif; display: flex; justify-content: center; align-items: center; height: 100vh; margin: 0; }
        .auth-card { background: var(--card); padding: 30px; border-radius: 20px; width: 350px; border: 1px solid #1e293b; box-shadow: 0 10px 30px rgba(0,0,0,0.5); }
        h2 { text-align: center; color: var(--main); margin-bottom: 20px; }
        .input-group { position: relative; margin-bottom: 15px; }
        input { width: 100%; padding: 12px; border-radius: 10px; border: 1px solid #334155; background: #020617; color: white; outline: none; }
        .toggle-pass { position: absolute; right: 10px; top: 12px; cursor: pointer; color: var(--main); font-size: 18px; }
        button { width: 100%; padding: 12px; background: var(--main); border: none; border-radius: 10px; font-weight: bold; cursor: pointer; transition: 0.3s; margin-top: 10px; }
        button:hover { opacity: 0.8; }
        .switch { text-align: center; margin-top: 15px; font-size: 13px; cursor: pointer; color: #94a3b8; }
        .switch b { color: var(--main); }
        .error { color: #f43f5e; font-size: 12px; text-align: center; display: none; margin-top: 10px; }
    </style>
</head>
<body>

<div class="auth-card" id="loginBox">
    <h2>GÄ°RÄ°Å ET</h2>
    <div class="input-group">
        <input type="email" id="lEmail" placeholder="Email Ã¼nvanÄ±">
    </div>
    <div class="input-group">
        <input type="password" id="lPass" placeholder="ÅifrÉ™">
        <span class="toggle-pass" onclick="toggleView('lPass')">ğŸ‘ï¸</span>
    </div>
    <button onclick="login()">DAXÄ°L OL</button>
    <p id="lErr" class="error">MÉ™lumatlar yanlÄ±ÅŸdÄ±r vÉ™ ya istifadÉ™Ã§i yoxdur!</p>
    <p class="switch" onclick="swap()">HesabÄ±n yoxdur? <b>Qeydiyyatdan keÃ§</b></p>
</div>

<div class="auth-card" id="regBox" style="display: none;">
    <h2>QEYDÄ°YYAT</h2>
    <div class="input-group">
        <input type="text" id="rName" placeholder="Ad Soyad">
    </div>
    <div class="input-group">
        <input type="email" id="rEmail" placeholder="Email Ã¼nvanÄ±">
    </div>
    <div class="input-group">
        <input type="password" id="rPass" placeholder="ÅifrÉ™">
        <span class="toggle-pass" onclick="toggleView('rPass')">ğŸ‘ï¸</span>
    </div>
    <button onclick="register()">HESAB YARAT</button>
    <p class="switch" onclick="swap()">ArtÄ±q hesabÄ±n var? <b>GiriÅŸ et</b></p>
</div>

<script>
    // ÅifrÉ™ni gÃ¶stÉ™r/gizlÉ™
    function toggleView(id) {
        const input = document.getElementById(id);
        input.type = input.type === "password" ? "text" : "password";
    }

    // SÉ™hifÉ™lÉ™ri dÉ™yiÅŸ (Login/Reg)
    function swap() {
        const l = document.getElementById('loginBox');
        const r = document.getElementById('regBox');
        l.style.display = l.style.display === 'none' ? 'block' : 'none';
        r.style.display = r.style.display === 'none' ? 'block' : 'none';
    }

    // QEYDÄ°YYAT FUNKSÄ°YASI
    function register() {
        const name = document.getElementById('rName').value;
        const email = document.getElementById('rEmail').value;
        const pass = document.getElementById('rPass').value;

        if (name && email && pass) {
            let users = JSON.parse(localStorage.getItem("edu_users")) || [];
            
            // Email-in olub olmadÄ±ÄŸÄ±nÄ± yoxla
            if(users.some(u => u.email === email)) {
                alert("Bu email artÄ±q qeydiyyatdan keÃ§ib!");
                return;
            }

            users.push({ name, email, pass, balance: 0, isBanned: false });
            localStorage.setItem("edu_users", JSON.stringify(users));
            alert("Qeydiyyat uÄŸurludur! Ä°ndi giriÅŸ edÉ™ bilÉ™rsiniz.");
            swap();
        } else {
            alert("BÃ¼tÃ¼n xanalarÄ± doldurun!");
        }
    }

    // GÄ°RÄ°Å FUNKSÄ°YASI
    function login() {
        const email = document.getElementById('lEmail').value;
        const pass = document.getElementById('lPass').value;
        const err = document.getElementById('lErr');

        let users = JSON.parse(localStorage.getItem("edu_users")) || [];
        const user = users.find(u => u.email === email && u.pass === pass);

        if (user) {
            if(user.isBanned) {
                alert("HesabÄ±nÄ±z admin tÉ™rÉ™findÉ™n bloklanÄ±b!");
                return;
            }
            localStorage.setItem("current_user", JSON.stringify(user));
            window.location.href = "dashboard.html";
        } else {
            err.style.display = "block";
        }
    }
</script>

</body>
</html>
