<!DOCTYPE html>
<html lang="az">
<head>
    <meta charset="UTF-8">
    <title>EduPath | Escobar Master Control</title>
    <script>
        // T∆èHL√úK∆èSƒ∞ZLƒ∞K
        if (localStorage.getItem("escobar_auth") !== "true") {
            window.location.href = "admin-login.html";
        }
    </script>
    <style>
        :root { --main: #38bdf8; --bg: #020617; --card: #0f172a; --red: #f43f5e; --green: #10b981; }
        * { box-sizing: border-box; margin: 0; padding: 0; font-family: 'Inter', sans-serif; }
        body { background: var(--bg); color: white; display: flex; min-height: 100vh; }
        .sidebar { width: 260px; background: var(--card); border-right: 1px solid #1e293b; padding: 25px; position: fixed; height: 100vh; display: flex; flex-direction: column; }
        .sidebar h2 { color: var(--main); margin-bottom: 30px; text-align: center; border-bottom: 2px solid var(--main); padding-bottom: 10px; }
        .content { margin-left: 260px; padding: 35px; width: calc(100% - 260px); }
        .section { background: var(--card); padding: 25px; border-radius: 20px; border: 1px solid #1e293b; margin-bottom: 25px; }
        table { width: 100%; border-collapse: collapse; margin-top: 15px; }
        th { text-align: left; padding: 12px; color: var(--main); border-bottom: 2px solid #1e293b; font-size: 13px; }
        td { padding: 12px; border-bottom: 1px solid #1e293b; font-size: 14px; }
        .form-group { margin-bottom: 15px; }
        input, select { width: 100%; padding: 12px; border-radius: 8px; border: 1px solid #334155; background: #020617; color: white; outline: none; }
        .btn { padding: 10px 20px; border: none; border-radius: 8px; cursor: pointer; font-weight: bold; transition: 0.3s; }
        .btn-blue { background: var(--main); color: #000; }
        .btn-green { background: var(--green); color: white; width: 100%; }
        .btn-red { background: var(--red); color: white; padding: 5px 10px; font-size: 12px; }
        .empty-msg { text-align: center; padding: 20px; opacity: 0.5; }
    </style>
</head>
<body>

    <div class="sidebar">
        <h2>ESCOBAR</h2>
        <div style="color: var(--main); font-size: 12px; text-align: center; margin-bottom: 20px;">ADMƒ∞Nƒ∞STRATOR</div>
        <button class="btn btn-red" onclick="logout()" style="margin-top: auto;">√áIXI≈û ET</button>
    </div>

    <div class="content">
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 30px;">
            <h1>Sistem ƒ∞dar…ôetm…ôsi</h1>
            <div id="clock" style="color: var(--main)"></div>
        </div>

        <div class="section">
            <h3>üë§ Yeni T…ôl…ôb…ô Qeydiyyatƒ±</h3>
            <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 10px; margin-top: 15px;">
                <input type="text" id="regName" placeholder="Ad Soyad">
                <input type="email" id="regEmail" placeholder="Email">
                <input type="text" id="regPass" placeholder="≈ûifr…ô">
            </div>
            <button class="btn btn-blue" style="margin-top: 15px;" onclick="addUser()">Sistem…ô ∆èlav…ô Et</button>
        </div>

        <div class="section">
            <h3>üë• Aktiv T…ôl…ôb…ôl…ôr</h3>
            <table>
                <thead>
                    <tr>
                        <th>Ad Soyad</th>
                        <th>Email</th>
                        <th>≈ûifr…ô</th>
                        <th>Balans</th>
                        <th>∆èm…ôliyyat</th>
                    </tr>
                </thead>
                <tbody id="userBody">
                    </tbody>
            </table>
            <div id="noUsers" class="empty-msg">Sistemd…ô h…ôl…ôlik istifad…ô√ßi yoxdur.</div>
        </div>

        <div class="section">
            <h3>üèÜ Turnir Ayarla</h3>
            <div style="display: grid; grid-template-columns: 2fr 1fr 1fr; gap: 10px; margin-top: 15px;">
                <input type="text" id="tName" placeholder="Turnir Adƒ±">
                <input type="number" id="tTicket" placeholder="Bilet (AZN)">
                <input type="number" id="tPrize" placeholder="M√ºkafat (AZN)">
            </div>
            <button class="btn btn-green" style="margin-top: 15px;" onclick="saveTournament()">Turniri Aktivl…ô≈üdir</button>
        </div>
    </div>

    <script>
        // M∆èLUMATLARI Y√úKL∆è
        let users = JSON.parse(localStorage.getItem("edu_users")) || [];

        function renderUsers() {
            const body = document.getElementById("userBody");
            const msg = document.getElementById("noUsers");
            body.innerHTML = "";
            
            if (users.length === 0) {
                msg.style.display = "block";
            } else {
                msg.style.display = "none";
                users.forEach((user, index) => {
                    body.innerHTML += `
                        <tr>
                            <td>${user.name}</td>
                            <td>${user.email}</td>
                            <td><code>${user.pass}</code></td>
                            <td style="color: var(--green); font-weight: bold;">${user.balance.toFixed(2)} AZN</td>
                            <td>
                                <button class="btn btn-blue" style="padding: 5px;" onclick="changeBal(${index})">+/-</button>
                                <button class="btn btn-red" onclick="deleteUser(${index})">Sƒ∞L</button>
                            </td>
                        </tr>
                    `;
                });
            }
        }

        // ƒ∞STƒ∞FAD∆è√áƒ∞ ∆èLAV∆è ET
        function addUser() {
            const name = document.getElementById("regName").value;
            const email = document.getElementById("regEmail").value;
            const pass = document.getElementById("regPass").value;

            if (name && email && pass) {
                users.push({ name, email, pass, balance: 0 });
                saveData();
                renderUsers();
                document.getElementById("regName").value = "";
                document.getElementById("regEmail").value = "";
                document.getElementById("regPass").value = "";
            } else { alert("B√ºt√ºn xanalarƒ± doldurun!"); }
        }

        // BALANS D∆èYƒ∞≈û
        function changeBal(index) {
            let amount = prompt("M…ôbl…ôƒüi daxil edin (M…ôs: 10 v…ô ya -5):");
            if (amount) {
                users[index].balance += parseFloat(amount);
                saveData();
                renderUsers();
            }
        }

        // Sƒ∞L
        function deleteUser(index) {
            if (confirm("Bu t…ôl…ôb…ôni silm…ôk ist…ôyirsiniz?")) {
                users.splice(index, 1);
                saveData();
                renderUsers();
            }
        }

        // TURNƒ∞Rƒ∞ YADDA SAXLA
        function saveTournament() {
            const t = {
                name: document.getElementById("tName").value,
                ticket: document.getElementById("tTicket").value,
                prize: document.getElementById("tPrize").value
            };
            if(t.name && t.ticket) {
                localStorage.setItem("active_tournament", JSON.stringify(t));
                alert("Turnir bazaya yazƒ±ldƒ±!");
            }
        }

        function saveData() { localStorage.setItem("edu_users", JSON.stringify(users)); }
        function logout() { localStorage.removeItem("escobar_auth"); window.location.href = "admin-login.html"; }
        
        setInterval(() => { document.getElementById('clock').innerText = new Date().toLocaleTimeString(); }, 1000);
        renderUsers();
    </script>
</body>
</html>
